

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Comparing Student Work to Generative AI &#8212; DS 1300</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'code/chat_gpt_analysis';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../book/00_introduction.html">
  
  
  
  
  
    <p class="title logo__title">DS 1300</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../book/00_introduction.html">
                    DS1300: A Practical Introduction to Data Science
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 1</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/01_hpc.html">Introduction to High-Performance Computing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/02_using_hpc.html">Using M3 for Class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/03_github_and_initial_setup.html">Introduction to GitHub and Getting Setup</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 2</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/04_data_science.html">Data Science Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/08_project.html">Semester Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_workbook.html">Introduction to Python Programming</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 3</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/10_pudding.html">The Pudding: Data Story Telling and Visualization</a></li>

<li class="toctree-l1"><a class="reference internal" href="02_workbook.html">Working with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="01_assignment.html">Introduction to Python Programming</a></li>





</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 4</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/06_data_ethics_bias.html">Data Ethics and Bias</a></li>
<li class="toctree-l1"><a class="reference internal" href="04_workbook.html">Exploring and Cleaning a Data Set</a></li>


<li class="toctree-l1"><a class="reference internal" href="02_assignment.html">Assignment: Working with Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 5</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/09_modeling.html">Building Models with Data</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 6</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="05_workbook.html">Dask Delayed</a></li>
<li class="toctree-l1"><a class="reference internal" href="06_workbook.html">Dask Arrays</a></li>
<li class="toctree-l1"><a class="reference internal" href="07_workbook.html">Dask DataFrames</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 7</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/12_inference.html">Inference</a></li>
<li class="toctree-l1"><a class="reference internal" href="15_workbook.html">GeoPandas and Mapping in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="03_assignment.html">Linear Regression and Temperature</a></li>

</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 8</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="12_workbook.html">Data Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="14_workbook.html">Intermediate TextMining with Python</a></li>


<li class="toctree-l1"><a class="reference internal" href="04_assignment.html">Data Visualization</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 9</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="13_workbook.html">Optimization Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../book/14_intro_to_AI.html">Introduction to AI</a></li>
<li class="toctree-l1"><a class="reference internal" href="16_workbook.html">Unsupervised Learning Example - Folktale Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="17_workbook.html">Supervised Deep Learning Example - Image Classification with the MNIST Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="18_workbook.html">Reinforcement Learning Example - Tic Tac Toe</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Day 10</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../book/13_art.html">Art</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/code/chat_gpt_analysis.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Comparing Student Work to Generative AI</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Comparing Student Work to Generative AI</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#counting-words-and-characters">Counting Words and Characters</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-text">Processing Text</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-words">Cleaning Up Words</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lowercase">Lowercase</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-punctuation">Remove Punctuation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-stopwords">Remove Stopwords</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-frequent-words">Remove Frequent Words</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lemmatization">Lemmatization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#term-frequency">Term Frequency</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-document-frequency">Inverse Document Frequency</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#term-frequency-inverse-document-frequency-tf-idf">Term Frequency – Inverse Document Frequency (TF-IDF)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#similarity">Similarity</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jaccard-similarity">Jaccard Similarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-similarity">Cosine Similarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-similarity">Visualize Similarity</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-tf-idf-and-machine-learning">Using TF-IDF and Machine Learning</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="comparing-student-work-to-generative-ai">
<h1>Comparing Student Work to Generative AI<a class="headerlink" href="#comparing-student-work-to-generative-ai" title="Permalink to this heading">#</a></h1>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading">#</a></h2>
<p>These are the basic libraries we will use in for data manipulation (pandas) and math functions (numpy). We will add more libraries as we need them.</p>
<p>As a best practice, it is a good idea to load all your libraries in a single cell at the top of a notebook, however for the purposes of this tutorial we will load some now and more as we go.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">config</span> <span class="n">InlineBackend</span><span class="o">.</span><span class="n">figure_format</span> <span class="o">=</span><span class="s1">&#39;retina&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">glob</span>
</pre></div>
</div>
<p>Load a data file into a pandas DataFrame.</p>
<p>This tutorial was designed around using sets of data you have yourselves in a form like a CSV, TSV, or TXT file.  Feel free to use any set of data, but for now we will use a dataset created from scraping this <a class="reference external" href="http://www.mftd.org/">Multilingual Folktale Database</a>.</p>
<p>This file is a CSV filetype, common for text data, but your data may also be stored as TSV’s, TXT’s, or other file types.  This will slightly change how you read from Pandas, but the concept is largely the same for the different filetypes.  Just keep this in mind when you see references to CSV.</p>
<p>To proceed, you will need to have this file downloaded and in the same folder as this notebook. Alternatively you can put the full path to the file.  Typically, your program will look for the file with the name you specified in the folder that contains your program unless you give the program a path to follow.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;../data/ds1300_paragraphs.csv&#39;</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>The saying data is the new gold could not be m...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A</td>
      <td>The presence of data, artificial intelligence,...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>A</td>
      <td>In our current world, the use of data is both ...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>A</td>
      <td>In my everyday life I do not really take notic...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>A</td>
      <td>The advancement of the human race has been lin...</td>
    </tr>
  </tbody>
</table>
</div>
<p>Here we can see all the information available to us from the file in the form of a Pandas DataFrame. For the remainder of this tutorial, we will focus primarily on the full text of each data chunk, which we will name the <em>Text</em> column.  With your data set this is likely to be something very different, so feel free to call is something else.</p>
</section>
<section id="counting-words-and-characters">
<h2>Counting Words and Characters<a class="headerlink" href="#counting-words-and-characters" title="Permalink to this heading">#</a></h2>
<p>The first bit of analysis we might want to do is to count the number of words in one piece of data. To do this we will add a column called <em>wordcount</em> and write an operation that applies a function to every row of the column.</p>
<p>Unpacking this piece of code, <em>len(str(x).split(” “)</em>, tells us what is happening.</p>
<p>For the content of cell <em>x</em>, convert it to a string, <em>str()</em>, then split that string into pieces at each space, <em>split()</em>.</p>
<p>The result of that is a list of all the words in the text and then we can count the length of that list, <em>len()</em>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;wordcount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)))</span>
<span class="n">data</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
      <th>wordcount</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>The saying data is the new gold could not be m...</td>
      <td>315</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A</td>
      <td>The presence of data, artificial intelligence,...</td>
      <td>325</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>A</td>
      <td>In our current world, the use of data is both ...</td>
      <td>354</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>A</td>
      <td>In my everyday life I do not really take notic...</td>
      <td>301</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>A</td>
      <td>The advancement of the human race has been lin...</td>
      <td>412</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>A</td>
      <td>Every day we are working with, sharing, and in...</td>
      <td>338</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>A</td>
      <td>One clear interaction of data that we see in o...</td>
      <td>304</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>285</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>A</td>
      <td>By living, we create data points. This pre-exi...</td>
      <td>496</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>A</td>
      <td>For me, the intersection between data, AI, and...</td>
      <td>316</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>A</td>
      <td>I just completed my first semester at SMU afte...</td>
      <td>417</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>A</td>
      <td>Data, the collection of information; artificia...</td>
      <td>422</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>A</td>
      <td>Data is everywhere. Even if we don't notice it...</td>
      <td>366</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>A</td>
      <td>In today’s day and age, data is one of the mos...</td>
      <td>301</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>A</td>
      <td>I use computers and algorithms everyday of my ...</td>
      <td>249</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>352</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>A</td>
      <td>The use of data is everywhere as soon as you o...</td>
      <td>263</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>A</td>
      <td>Before this class data science meant nothing t...</td>
      <td>312</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>236</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>330</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>A</td>
      <td>As an avid user of social media, data science ...</td>
      <td>244</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>A</td>
      <td>The use of artificial intelligence, computing,...</td>
      <td>313</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>317</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>303</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>432</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>321</td>
    </tr>
    <tr>
      <th>26</th>
      <td>27</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>229</td>
    </tr>
    <tr>
      <th>27</th>
      <td>28</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>300</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>B</td>
      <td>The convergence of data, artificial intelligen...</td>
      <td>304</td>
    </tr>
    <tr>
      <th>29</th>
      <td>30</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>248</td>
    </tr>
    <tr>
      <th>30</th>
      <td>31</td>
      <td>B</td>
      <td>The integration of data, artificial intelligen...</td>
      <td>288</td>
    </tr>
    <tr>
      <th>31</th>
      <td>32</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>373</td>
    </tr>
    <tr>
      <th>32</th>
      <td>33</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>196</td>
    </tr>
    <tr>
      <th>33</th>
      <td>34</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>348</td>
    </tr>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>514</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>185</td>
    </tr>
    <tr>
      <th>36</th>
      <td>37</td>
      <td>B</td>
      <td>In today's technologically advanced world, the...</td>
      <td>344</td>
    </tr>
    <tr>
      <th>37</th>
      <td>38</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>343</td>
    </tr>
    <tr>
      <th>38</th>
      <td>39</td>
      <td>B</td>
      <td>In the modern age, the intersection of data, a...</td>
      <td>352</td>
    </tr>
    <tr>
      <th>39</th>
      <td>40</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>178</td>
    </tr>
    <tr>
      <th>40</th>
      <td>41</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>377</td>
    </tr>
    <tr>
      <th>41</th>
      <td>42</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>498</td>
    </tr>
    <tr>
      <th>42</th>
      <td>43</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>247</td>
    </tr>
    <tr>
      <th>43</th>
      <td>44</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>408</td>
    </tr>
    <tr>
      <th>44</th>
      <td>45</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>359</td>
    </tr>
    <tr>
      <th>45</th>
      <td>46</td>
      <td>B</td>
      <td>Using technology on a daily basis can bring nu...</td>
      <td>126</td>
    </tr>
    <tr>
      <th>46</th>
      <td>47</td>
      <td>B</td>
      <td>The triad of data, artificial intelligence, an...</td>
      <td>286</td>
    </tr>
    <tr>
      <th>47</th>
      <td>48</td>
      <td>B</td>
      <td>In the rapidly evolving landscape of technolog...</td>
      <td>330</td>
    </tr>
    <tr>
      <th>48</th>
      <td>49</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>251</td>
    </tr>
    <tr>
      <th>49</th>
      <td>50</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>426</td>
    </tr>
    <tr>
      <th>50</th>
      <td>51</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>186</td>
    </tr>
  </tbody>
</table>
</div>
<p>We can do something similar to count the number of characters in the data chunk, including spaces. If you wanted to exclude whitespaces, you could take the list we made above, join it together and count the length of the resulting string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;char_count&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">len</span><span class="p">()</span>
<span class="n">data</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
      <th>wordcount</th>
      <th>char_count</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>The saying data is the new gold could not be m...</td>
      <td>315</td>
      <td>1969</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A</td>
      <td>The presence of data, artificial intelligence,...</td>
      <td>325</td>
      <td>1941</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>A</td>
      <td>In our current world, the use of data is both ...</td>
      <td>354</td>
      <td>2321</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>A</td>
      <td>In my everyday life I do not really take notic...</td>
      <td>301</td>
      <td>1576</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>A</td>
      <td>The advancement of the human race has been lin...</td>
      <td>412</td>
      <td>3065</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>A</td>
      <td>Every day we are working with, sharing, and in...</td>
      <td>338</td>
      <td>1897</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>A</td>
      <td>One clear interaction of data that we see in o...</td>
      <td>304</td>
      <td>1718</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>285</td>
      <td>1710</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>A</td>
      <td>By living, we create data points. This pre-exi...</td>
      <td>496</td>
      <td>2980</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>A</td>
      <td>For me, the intersection between data, AI, and...</td>
      <td>316</td>
      <td>1645</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>A</td>
      <td>I just completed my first semester at SMU afte...</td>
      <td>417</td>
      <td>2438</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>A</td>
      <td>Data, the collection of information; artificia...</td>
      <td>422</td>
      <td>2614</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>A</td>
      <td>Data is everywhere. Even if we don't notice it...</td>
      <td>366</td>
      <td>1959</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>A</td>
      <td>In today’s day and age, data is one of the mos...</td>
      <td>301</td>
      <td>1853</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>A</td>
      <td>I use computers and algorithms everyday of my ...</td>
      <td>249</td>
      <td>1358</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>352</td>
      <td>1853</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>A</td>
      <td>The use of data is everywhere as soon as you o...</td>
      <td>263</td>
      <td>1393</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>A</td>
      <td>Before this class data science meant nothing t...</td>
      <td>312</td>
      <td>1665</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>236</td>
      <td>1392</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>330</td>
      <td>1748</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>A</td>
      <td>As an avid user of social media, data science ...</td>
      <td>244</td>
      <td>1385</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>A</td>
      <td>The use of artificial intelligence, computing,...</td>
      <td>313</td>
      <td>1862</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>317</td>
      <td>1971</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>303</td>
      <td>1703</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>432</td>
      <td>3033</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>321</td>
      <td>2289</td>
    </tr>
    <tr>
      <th>26</th>
      <td>27</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>229</td>
      <td>1516</td>
    </tr>
    <tr>
      <th>27</th>
      <td>28</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>300</td>
      <td>2020</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>B</td>
      <td>The convergence of data, artificial intelligen...</td>
      <td>304</td>
      <td>2013</td>
    </tr>
    <tr>
      <th>29</th>
      <td>30</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>248</td>
      <td>1680</td>
    </tr>
    <tr>
      <th>30</th>
      <td>31</td>
      <td>B</td>
      <td>The integration of data, artificial intelligen...</td>
      <td>288</td>
      <td>1843</td>
    </tr>
    <tr>
      <th>31</th>
      <td>32</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>373</td>
      <td>2637</td>
    </tr>
    <tr>
      <th>32</th>
      <td>33</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>196</td>
      <td>1351</td>
    </tr>
    <tr>
      <th>33</th>
      <td>34</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>348</td>
      <td>2446</td>
    </tr>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>514</td>
      <td>3155</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>185</td>
      <td>1137</td>
    </tr>
    <tr>
      <th>36</th>
      <td>37</td>
      <td>B</td>
      <td>In today's technologically advanced world, the...</td>
      <td>344</td>
      <td>2436</td>
    </tr>
    <tr>
      <th>37</th>
      <td>38</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>343</td>
      <td>2353</td>
    </tr>
    <tr>
      <th>38</th>
      <td>39</td>
      <td>B</td>
      <td>In the modern age, the intersection of data, a...</td>
      <td>352</td>
      <td>2442</td>
    </tr>
    <tr>
      <th>39</th>
      <td>40</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>178</td>
      <td>1184</td>
    </tr>
    <tr>
      <th>40</th>
      <td>41</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>377</td>
      <td>2601</td>
    </tr>
    <tr>
      <th>41</th>
      <td>42</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>498</td>
      <td>2953</td>
    </tr>
    <tr>
      <th>42</th>
      <td>43</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>247</td>
      <td>1835</td>
    </tr>
    <tr>
      <th>43</th>
      <td>44</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>408</td>
      <td>2855</td>
    </tr>
    <tr>
      <th>44</th>
      <td>45</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>359</td>
      <td>2467</td>
    </tr>
    <tr>
      <th>45</th>
      <td>46</td>
      <td>B</td>
      <td>Using technology on a daily basis can bring nu...</td>
      <td>126</td>
      <td>869</td>
    </tr>
    <tr>
      <th>46</th>
      <td>47</td>
      <td>B</td>
      <td>The triad of data, artificial intelligence, an...</td>
      <td>286</td>
      <td>1852</td>
    </tr>
    <tr>
      <th>47</th>
      <td>48</td>
      <td>B</td>
      <td>In the rapidly evolving landscape of technolog...</td>
      <td>330</td>
      <td>2292</td>
    </tr>
    <tr>
      <th>48</th>
      <td>49</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>251</td>
      <td>1570</td>
    </tr>
    <tr>
      <th>49</th>
      <td>50</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>426</td>
      <td>2815</td>
    </tr>
    <tr>
      <th>50</th>
      <td>51</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>186</td>
      <td>1268</td>
    </tr>
  </tbody>
</table>
</div>
<p>Now we want to calculate the average word length in the data.</p>
<p>Let’s define a function that will do that for us:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">avg_word</span><span class="p">(</span><span class="n">sentence</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">sentence</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">)</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">words</span><span class="p">))</span>
</pre></div>
</div>
<p>We can now apply that function to all the data chunks and save that in a new column.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;avg_word&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">avg_word</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
      <th>wordcount</th>
      <th>char_count</th>
      <th>avg_word</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>The saying data is the new gold could not be m...</td>
      <td>315</td>
      <td>1969</td>
      <td>5.227848</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A</td>
      <td>The presence of data, artificial intelligence,...</td>
      <td>325</td>
      <td>1941</td>
      <td>4.990741</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>A</td>
      <td>In our current world, the use of data is both ...</td>
      <td>354</td>
      <td>2321</td>
      <td>5.486034</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>A</td>
      <td>In my everyday life I do not really take notic...</td>
      <td>301</td>
      <td>1576</td>
      <td>4.253333</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>A</td>
      <td>The advancement of the human race has been lin...</td>
      <td>412</td>
      <td>3065</td>
      <td>6.360577</td>
    </tr>
  </tbody>
</table>
</div>
<p>We can then sort by the average word length.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;avg_word&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
      <th>wordcount</th>
      <th>char_count</th>
      <th>avg_word</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>A</td>
      <td>For me, the intersection between data, AI, and...</td>
      <td>316</td>
      <td>1645</td>
      <td>4.235669</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>A</td>
      <td>In my everyday life I do not really take notic...</td>
      <td>301</td>
      <td>1576</td>
      <td>4.253333</td>
    </tr>
    <tr>
      <th>15</th>
      <td>16</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>352</td>
      <td>1853</td>
      <td>4.273504</td>
    </tr>
    <tr>
      <th>19</th>
      <td>20</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>330</td>
      <td>1748</td>
      <td>4.300000</td>
    </tr>
    <tr>
      <th>16</th>
      <td>17</td>
      <td>A</td>
      <td>The use of data is everywhere as soon as you o...</td>
      <td>263</td>
      <td>1393</td>
      <td>4.316794</td>
    </tr>
    <tr>
      <th>17</th>
      <td>18</td>
      <td>A</td>
      <td>Before this class data science meant nothing t...</td>
      <td>312</td>
      <td>1665</td>
      <td>4.353698</td>
    </tr>
    <tr>
      <th>12</th>
      <td>13</td>
      <td>A</td>
      <td>Data is everywhere. Even if we don't notice it...</td>
      <td>366</td>
      <td>1959</td>
      <td>4.355191</td>
    </tr>
    <tr>
      <th>14</th>
      <td>15</td>
      <td>A</td>
      <td>I use computers and algorithms everyday of my ...</td>
      <td>249</td>
      <td>1358</td>
      <td>4.475806</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>A</td>
      <td>Every day we are working with, sharing, and in...</td>
      <td>338</td>
      <td>1897</td>
      <td>4.615385</td>
    </tr>
    <tr>
      <th>23</th>
      <td>24</td>
      <td>A</td>
      <td>Data, artificial intelligence, and computing a...</td>
      <td>303</td>
      <td>1703</td>
      <td>4.623762</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>A</td>
      <td>One clear interaction of data that we see in o...</td>
      <td>304</td>
      <td>1718</td>
      <td>4.663366</td>
    </tr>
    <tr>
      <th>20</th>
      <td>21</td>
      <td>A</td>
      <td>As an avid user of social media, data science ...</td>
      <td>244</td>
      <td>1385</td>
      <td>4.699588</td>
    </tr>
    <tr>
      <th>10</th>
      <td>11</td>
      <td>A</td>
      <td>I just completed my first semester at SMU afte...</td>
      <td>417</td>
      <td>2438</td>
      <td>4.800000</td>
    </tr>
    <tr>
      <th>41</th>
      <td>42</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>498</td>
      <td>2953</td>
      <td>4.822134</td>
    </tr>
    <tr>
      <th>18</th>
      <td>19</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>236</td>
      <td>1392</td>
      <td>4.910638</td>
    </tr>
    <tr>
      <th>21</th>
      <td>22</td>
      <td>A</td>
      <td>The use of artificial intelligence, computing,...</td>
      <td>313</td>
      <td>1862</td>
      <td>4.967949</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>A</td>
      <td>The presence of data, artificial intelligence,...</td>
      <td>325</td>
      <td>1941</td>
      <td>4.990741</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>A</td>
      <td>By living, we create data points. This pre-exi...</td>
      <td>496</td>
      <td>2980</td>
      <td>4.995976</td>
    </tr>
    <tr>
      <th>34</th>
      <td>35</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>514</td>
      <td>3155</td>
      <td>5.021033</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>285</td>
      <td>1710</td>
      <td>5.021127</td>
    </tr>
    <tr>
      <th>35</th>
      <td>36</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>185</td>
      <td>1137</td>
      <td>5.151351</td>
    </tr>
    <tr>
      <th>13</th>
      <td>14</td>
      <td>A</td>
      <td>In today’s day and age, data is one of the mos...</td>
      <td>301</td>
      <td>1853</td>
      <td>5.159468</td>
    </tr>
    <tr>
      <th>11</th>
      <td>12</td>
      <td>A</td>
      <td>Data, the collection of information; artificia...</td>
      <td>422</td>
      <td>2614</td>
      <td>5.209026</td>
    </tr>
    <tr>
      <th>22</th>
      <td>23</td>
      <td>A</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>317</td>
      <td>1971</td>
      <td>5.220820</td>
    </tr>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>The saying data is the new gold could not be m...</td>
      <td>315</td>
      <td>1969</td>
      <td>5.227848</td>
    </tr>
    <tr>
      <th>48</th>
      <td>49</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>251</td>
      <td>1570</td>
      <td>5.258964</td>
    </tr>
    <tr>
      <th>30</th>
      <td>31</td>
      <td>B</td>
      <td>The integration of data, artificial intelligen...</td>
      <td>288</td>
      <td>1843</td>
      <td>5.370242</td>
    </tr>
    <tr>
      <th>46</th>
      <td>47</td>
      <td>B</td>
      <td>The triad of data, artificial intelligence, an...</td>
      <td>286</td>
      <td>1852</td>
      <td>5.401384</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>A</td>
      <td>In our current world, the use of data is both ...</td>
      <td>354</td>
      <td>2321</td>
      <td>5.486034</td>
    </tr>
    <tr>
      <th>49</th>
      <td>50</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>426</td>
      <td>2815</td>
      <td>5.574766</td>
    </tr>
    <tr>
      <th>26</th>
      <td>27</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>229</td>
      <td>1516</td>
      <td>5.624454</td>
    </tr>
    <tr>
      <th>28</th>
      <td>29</td>
      <td>B</td>
      <td>The convergence of data, artificial intelligen...</td>
      <td>304</td>
      <td>2013</td>
      <td>5.625000</td>
    </tr>
    <tr>
      <th>39</th>
      <td>40</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>178</td>
      <td>1184</td>
      <td>5.657303</td>
    </tr>
    <tr>
      <th>29</th>
      <td>30</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>248</td>
      <td>1680</td>
      <td>5.685259</td>
    </tr>
    <tr>
      <th>27</th>
      <td>28</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>300</td>
      <td>2020</td>
      <td>5.736667</td>
    </tr>
    <tr>
      <th>37</th>
      <td>38</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>343</td>
      <td>2353</td>
      <td>5.777457</td>
    </tr>
    <tr>
      <th>44</th>
      <td>45</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>359</td>
      <td>2467</td>
      <td>5.787879</td>
    </tr>
    <tr>
      <th>40</th>
      <td>41</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>377</td>
      <td>2601</td>
      <td>5.818898</td>
    </tr>
    <tr>
      <th>50</th>
      <td>51</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>186</td>
      <td>1268</td>
      <td>5.822581</td>
    </tr>
    <tr>
      <th>38</th>
      <td>39</td>
      <td>B</td>
      <td>In the modern age, the intersection of data, a...</td>
      <td>352</td>
      <td>2442</td>
      <td>5.829132</td>
    </tr>
    <tr>
      <th>45</th>
      <td>46</td>
      <td>B</td>
      <td>Using technology on a daily basis can bring nu...</td>
      <td>126</td>
      <td>869</td>
      <td>5.873016</td>
    </tr>
    <tr>
      <th>32</th>
      <td>33</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>196</td>
      <td>1351</td>
      <td>5.897959</td>
    </tr>
    <tr>
      <th>24</th>
      <td>25</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>432</td>
      <td>3033</td>
      <td>5.931350</td>
    </tr>
    <tr>
      <th>43</th>
      <td>44</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>408</td>
      <td>2855</td>
      <td>5.941606</td>
    </tr>
    <tr>
      <th>47</th>
      <td>48</td>
      <td>B</td>
      <td>In the rapidly evolving landscape of technolog...</td>
      <td>330</td>
      <td>2292</td>
      <td>5.948485</td>
    </tr>
    <tr>
      <th>33</th>
      <td>34</td>
      <td>B</td>
      <td>In today's interconnected world, the intersect...</td>
      <td>348</td>
      <td>2446</td>
      <td>5.962963</td>
    </tr>
    <tr>
      <th>31</th>
      <td>32</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>373</td>
      <td>2637</td>
      <td>5.986737</td>
    </tr>
    <tr>
      <th>36</th>
      <td>37</td>
      <td>B</td>
      <td>In today's technologically advanced world, the...</td>
      <td>344</td>
      <td>2436</td>
      <td>5.991379</td>
    </tr>
    <tr>
      <th>25</th>
      <td>26</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>321</td>
      <td>2289</td>
      <td>6.033846</td>
    </tr>
    <tr>
      <th>42</th>
      <td>43</td>
      <td>B</td>
      <td>The intersection of data, artificial intellige...</td>
      <td>247</td>
      <td>1835</td>
      <td>6.357430</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>A</td>
      <td>The advancement of the human race has been lin...</td>
      <td>412</td>
      <td>3065</td>
      <td>6.360577</td>
    </tr>
  </tbody>
</table>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="processing-text">
<h1>Processing Text<a class="headerlink" href="#processing-text" title="Permalink to this heading">#</a></h1>
<p>A major component of doing analysis on text is the cleaning of the text prior to the analysis.</p>
<p>Though this process destroys some elements of the text (sentence structure, for example), it is often necessary in order to describe a text analytically. Depending on your choice of cleaning techniques, some elements might be preserved better than others if that is of importance to your analysis.</p>
<section id="cleaning-up-words">
<h2>Cleaning Up Words<a class="headerlink" href="#cleaning-up-words" title="Permalink to this heading">#</a></h2>
<p>This series of steps aims to clean up and standardize the text itself. This generally consists of removing common elements such as stopwords and punctuation but can be expanded to more detailed removals.</p>
<section id="lowercase">
<h3>Lowercase<a class="headerlink" href="#lowercase" title="Permalink to this heading">#</a></h3>
<p>Here we enforce that all of the text is lowercase. This makes it easier to match cases and sort words.</p>
<p>Notice we are assigning our modified column back to itself. This will save our modifications to our DataFrame</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0    the saying data is the new gold could not be m...
1    the presence of data, artificial intelligence,...
2    in our current world, the use of data is both ...
3    in my everyday life i do not really take notic...
4    the advancement of the human race has been lin...
Name: Text, dtype: object
</pre></div>
</div>
</section>
<section id="remove-punctuation">
<h3>Remove Punctuation<a class="headerlink" href="#remove-punctuation" title="Permalink to this heading">#</a></h3>
<p>Here we remove all punctuation from the data. This allows us to focus on the words only as well as assist in matching.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[^\w\s]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1623401/1947507549.py:1: FutureWarning: The default value of regex will change from True to False in a future version.
  data[&#39;Text&#39;] = data[&#39;Text&#39;].str.replace(&#39;[^\w\s]&#39;,&#39;&#39;)





0    the saying data is the new gold could not be m...
1    the presence of data artificial intelligence a...
2    in our current world the use of data is both t...
3    in my everyday life i do not really take notic...
4    the advancement of the human race has been lin...
Name: Text, dtype: object
</pre></div>
</div>
</section>
<section id="remove-stopwords">
<h3>Remove Stopwords<a class="headerlink" href="#remove-stopwords" title="Permalink to this heading">#</a></h3>
<p>Stopwords are words that are commonly used and do little to aid in the understanding of the content of a text. There is no universal list of stopwords and they vary on the style, time period and media from which your text came from.  Typically, people choose to remove stopwords from their data, as it adds extra clutter while the words themselves provide little to no insight as to the nature of the data.  For now, we are simply going to count them to get an idea of how many there are.</p>
<p>For this tutorial, we will use the standard list of stopwords provided by the Natural Language Toolkit python library.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="n">stop</span> <span class="o">=</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stop</span><span class="p">))</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0    saying data new gold could accurate current so...
1    presence data artificial intelligence computin...
2    current world use data interesting manipulated...
3    everyday life really take notice intersection ...
4    advancement human race linked remarkable progr...
Name: Text, dtype: object
</pre></div>
</div>
</section>
<section id="remove-frequent-words">
<h3>Remove Frequent Words<a class="headerlink" href="#remove-frequent-words" title="Permalink to this heading">#</a></h3>
<p>If we want to catch common words that might have slipped through the stopword removal, we can build out a list of the most common words remaining in our text.</p>
<p>Here we have built a list of the 10 most common words. Some of these words might actually be relevant to our analysis so it is important to be careful with this method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">freq</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">())</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">10</span><span class="p">]</span>
<span class="n">freq</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>data            363
algorithms      167
ai              116
computing       111
use             101
artificial       93
intelligence     91
lives            68
online           67
way              66
dtype: int64
</pre></div>
</div>
<p>We now follow the same procedure with which we removed stopwords to remove the most frequent words.</p>
</section>
</section>
<section id="lemmatization">
<h2>Lemmatization<a class="headerlink" href="#lemmatization" title="Permalink to this heading">#</a></h2>
<p>Lemmatization is often a more useful approach than stemming because it leverages an understanding of the word itself to convert the word back to its root word. However, this means lemmatization is less aggressive than stemming (probably a good thing).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">nltk</span>
<span class="n">nltk</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="s1">&#39;wordnet&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[nltk_data] Downloading package wordnet to /users/egodat/nltk_data...
[nltk_data]   Package wordnet is already up-to-date!





True
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">textblob</span> <span class="kn">import</span> <span class="n">Word</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">Word</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">.</span><span class="n">lemmatize</span><span class="p">()</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">()]))</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0    saying data new gold could accurate current so...
1    presence data artificial intelligence computin...
2    current world use data interesting manipulated...
3    everyday life really take notice intersection ...
4    advancement human race linked remarkable progr...
Name: Text, dtype: object
</pre></div>
</div>
<p>At this point we have a several options for cleaning and structuring our text data. The next section will focus on more advanced ways to study text analytically.</p>
</section>
<section id="term-frequency">
<h2>Term Frequency<a class="headerlink" href="#term-frequency" title="Permalink to this heading">#</a></h2>
<p>Term Frequency is a measure of how often a term appears in a document. There are different ways to define this but the simplest is a raw count of the number of times each term appears.</p>
<p>There are other ways of defining this including a true term frequency and a log scaled definition. All three have been implemented below but the default will the raw count definition, as it matches with the remainder of the definitions in this tutorial.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Definition</p></th>
<th class="head"><p>Formula</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Raw Count</p></td>
<td><p>$<span class="math notranslate nohighlight">\(f_{t,d}\)</span>$</p></td>
</tr>
<tr class="row-odd"><td><p>Term Frequency</p></td>
<td><p>$<span class="math notranslate nohighlight">\(\frac{f_{t,d}}{\sum_{t'\in d}f_{t',d}}\)</span>$</p></td>
</tr>
<tr class="row-even"><td><p>Log Scaled</p></td>
<td><p>$<span class="math notranslate nohighlight">\(\log(1+f_{t,d})\)</span>$</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Raw Count Definition</span>
<span class="n">tf1</span> <span class="o">=</span> <span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">value_counts</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)))</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>

<span class="c1">## Term Frequency Definition</span>
<span class="c1">#tf1 = (data[&#39;Text&#39;][0:5]).apply(lambda x: (pd.value_counts(x.split(&quot; &quot;)))/len(x.split(&quot; &quot;))).sum(axis = 0).reset_index() </span>

<span class="c1">## Log Scaled Definition</span>
<span class="c1">#tf1 = (data[&#39;Text&#39;][0:10]).apply(lambda x: 1.0+np.log(pd.value_counts(x.split(&quot; &quot;)))).sum(axis = 0).reset_index() </span>

<span class="n">tf1</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">,</span><span class="s1">&#39;tf&#39;</span><span class="p">]</span>
<span class="n">tf1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;tf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>words</th>
      <th>tf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>data</td>
      <td>363.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>algorithm</td>
      <td>185.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>life</td>
      <td>125.0</td>
    </tr>
    <tr>
      <th>83</th>
      <td>ai</td>
      <td>119.0</td>
    </tr>
    <tr>
      <th>94</th>
      <td>computing</td>
      <td>111.0</td>
    </tr>
    <tr>
      <th>93</th>
      <td>use</td>
      <td>101.0</td>
    </tr>
    <tr>
      <th>158</th>
      <td>artificial</td>
      <td>93.0</td>
    </tr>
    <tr>
      <th>157</th>
      <td>intelligence</td>
      <td>91.0</td>
    </tr>
    <tr>
      <th>34</th>
      <td>way</td>
      <td>82.0</td>
    </tr>
    <tr>
      <th>256</th>
      <td>online</td>
      <td>67.0</td>
    </tr>
  </tbody>
</table>
</div>
</section>
<section id="inverse-document-frequency">
<h2>Inverse Document Frequency<a class="headerlink" href="#inverse-document-frequency" title="Permalink to this heading">#</a></h2>
<p>Inverse Document Frequency is a measure of how common or rare a term is across multiple documents. That gives a measure of how much weight that term carries.</p>
<p>For a more concrete analogy of this, imagine a room full of NBA players; here a 7 foot tall person wouldn’t be all that shocking. However if you have a room full of kindergarten students, a 7 foot tall person would be a huge surprise.</p>
<p>The simplest and standard definition of Inverse Document Frequency is to take the logarithm of the ratio of the number of documents containing a term to the total number of documents.</p>
<div class="math notranslate nohighlight">
\[-\log\frac{n_t}{N} = \log\frac{N}{n_t}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">word</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">tf1</span><span class="p">[</span><span class="s1">&#39;words&#39;</span><span class="p">]):</span>
    <span class="n">tf1</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;idf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">word</span><span class="p">)])))</span>

<span class="n">tf1</span><span class="p">[:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>words</th>
      <th>tf</th>
      <th>idf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>content</td>
      <td>46.0</td>
      <td>0.712950</td>
    </tr>
    <tr>
      <th>1</th>
      <td>algorithm</td>
      <td>185.0</td>
      <td>0.040005</td>
    </tr>
    <tr>
      <th>2</th>
      <td>company</td>
      <td>25.0</td>
      <td>1.159237</td>
    </tr>
    <tr>
      <th>3</th>
      <td>data</td>
      <td>363.0</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>interest</td>
      <td>36.0</td>
      <td>0.376478</td>
    </tr>
    <tr>
      <th>5</th>
      <td>new</td>
      <td>24.0</td>
      <td>0.753772</td>
    </tr>
    <tr>
      <th>6</th>
      <td>people</td>
      <td>22.0</td>
      <td>1.446919</td>
    </tr>
    <tr>
      <th>7</th>
      <td>pattern</td>
      <td>20.0</td>
      <td>1.159237</td>
    </tr>
    <tr>
      <th>8</th>
      <td>example</td>
      <td>34.0</td>
      <td>0.753772</td>
    </tr>
    <tr>
      <th>9</th>
      <td>life</td>
      <td>125.0</td>
      <td>0.040005</td>
    </tr>
  </tbody>
</table>
</div>
</section>
<section id="term-frequency-inverse-document-frequency-tf-idf">
<h2>Term Frequency – Inverse Document Frequency (<a class="reference external" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">TF-IDF</a>)<a class="headerlink" href="#term-frequency-inverse-document-frequency-tf-idf" title="Permalink to this heading">#</a></h2>
<p>Term Frequency – Inverse Document Frequency (TF-IDF) is a composite measure of both Term Frequency and Inverse Document Frequency.</p>
<p>From <a class="reference external" href="https://en.wikipedia.org/wiki/Tf%E2%80%93idf">Wikipedia</a>:
“A high weight in TF–IDF is reached by a high term frequency (in the given document) and a low document frequency of the term in the whole collection of documents; the weights hence tend to filter out common terms”</p>
<p>More concisely, a high TD-IDF says that a word is very important in the documents in which it appears.</p>
<p>There are a few weighting schemes for TF-IDF. Here we use scheme (1).</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Weighting Scheme</p></th>
<th class="head"><p>Document Term Weight</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>(1)</p></td>
<td><p>$<span class="math notranslate nohighlight">\(f_{t,d}\cdot\log\frac{N}{n_t}\)</span>$</p></td>
</tr>
<tr class="row-odd"><td><p>(2)</p></td>
<td><p>$<span class="math notranslate nohighlight">\(1+\log(f_{t,d})\)</span>$</p></td>
</tr>
<tr class="row-even"><td><p>(3)</p></td>
<td><p>$<span class="math notranslate nohighlight">\((1+\log(f_{t,d}))\cdot\log\frac{N}{n_t}\)</span>$</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf1</span><span class="p">[</span><span class="s1">&#39;tfidf&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tf1</span><span class="p">[</span><span class="s1">&#39;tf&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="n">tf1</span><span class="p">[</span><span class="s1">&#39;idf&#39;</span><span class="p">]</span>
<span class="n">tf1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;tfidf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>words</th>
      <th>tf</th>
      <th>idf</th>
      <th>tfidf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>97</th>
      <td>user</td>
      <td>32.0</td>
      <td>1.159237</td>
      <td>37.095581</td>
    </tr>
    <tr>
      <th>479</th>
      <td>assistant</td>
      <td>35.0</td>
      <td>0.987387</td>
      <td>34.558533</td>
    </tr>
    <tr>
      <th>375</th>
      <td>used</td>
      <td>41.0</td>
      <td>0.840783</td>
      <td>34.472110</td>
    </tr>
    <tr>
      <th>626</th>
      <td>potential</td>
      <td>25.0</td>
      <td>1.366876</td>
      <td>34.171907</td>
    </tr>
    <tr>
      <th>438</th>
      <td>personalized</td>
      <td>50.0</td>
      <td>0.673729</td>
      <td>33.686455</td>
    </tr>
    <tr>
      <th>256</th>
      <td>online</td>
      <td>67.0</td>
      <td>0.497838</td>
      <td>33.355175</td>
    </tr>
    <tr>
      <th>0</th>
      <td>content</td>
      <td>46.0</td>
      <td>0.712950</td>
      <td>32.795691</td>
    </tr>
    <tr>
      <th>443</th>
      <td>device</td>
      <td>33.0</td>
      <td>0.987387</td>
      <td>32.583760</td>
    </tr>
    <tr>
      <th>15</th>
      <td>website</td>
      <td>15.0</td>
      <td>2.140066</td>
      <td>32.100992</td>
    </tr>
    <tr>
      <th>6</th>
      <td>people</td>
      <td>22.0</td>
      <td>1.446919</td>
      <td>31.832218</td>
    </tr>
    <tr>
      <th>251</th>
      <td>make</td>
      <td>54.0</td>
      <td>0.564530</td>
      <td>30.484609</td>
    </tr>
    <tr>
      <th>266</th>
      <td>digital</td>
      <td>38.0</td>
      <td>0.796331</td>
      <td>30.260594</td>
    </tr>
    <tr>
      <th>123</th>
      <td>also</td>
      <td>59.0</td>
      <td>0.497838</td>
      <td>29.372467</td>
    </tr>
    <tr>
      <th>504</th>
      <td>various</td>
      <td>28.0</td>
      <td>1.041454</td>
      <td>29.160708</td>
    </tr>
    <tr>
      <th>28</th>
      <td>route</td>
      <td>25.0</td>
      <td>1.159237</td>
      <td>28.980923</td>
    </tr>
    <tr>
      <th>2</th>
      <td>company</td>
      <td>25.0</td>
      <td>1.159237</td>
      <td>28.980923</td>
    </tr>
    <tr>
      <th>254</th>
      <td>based</td>
      <td>34.0</td>
      <td>0.840783</td>
      <td>28.586628</td>
    </tr>
    <tr>
      <th>144</th>
      <td>information</td>
      <td>65.0</td>
      <td>0.435318</td>
      <td>28.295675</td>
    </tr>
    <tr>
      <th>305</th>
      <td>recommendation</td>
      <td>51.0</td>
      <td>0.530628</td>
      <td>27.062041</td>
    </tr>
    <tr>
      <th>267</th>
      <td>decision</td>
      <td>32.0</td>
      <td>0.840783</td>
      <td>26.905062</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tf1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;tfidf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>words</th>
      <th>tf</th>
      <th>idf</th>
      <th>tfidf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>249</th>
      <td>v</td>
      <td>2.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>data</td>
      <td>363.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>1309</th>
      <td>le</td>
      <td>1.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>235</th>
      <td>us</td>
      <td>6.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>113</th>
      <td>u</td>
      <td>40.0</td>
      <td>0.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>715</th>
      <td>ex</td>
      <td>1.0</td>
      <td>0.103184</td>
      <td>0.103184</td>
    </tr>
    <tr>
      <th>429</th>
      <td>end</td>
      <td>3.0</td>
      <td>0.040005</td>
      <td>0.120016</td>
    </tr>
    <tr>
      <th>1292</th>
      <td>art</td>
      <td>1.0</td>
      <td>0.125163</td>
      <td>0.125163</td>
    </tr>
    <tr>
      <th>155</th>
      <td>act</td>
      <td>3.0</td>
      <td>0.060625</td>
      <td>0.181874</td>
    </tr>
    <tr>
      <th>1217</th>
      <td>tell</td>
      <td>1.0</td>
      <td>0.194156</td>
      <td>0.194156</td>
    </tr>
    <tr>
      <th>219</th>
      <td>go</td>
      <td>12.0</td>
      <td>0.019803</td>
      <td>0.237632</td>
    </tr>
    <tr>
      <th>1144</th>
      <td>id</td>
      <td>2.0</td>
      <td>0.147636</td>
      <td>0.295272</td>
    </tr>
    <tr>
      <th>1727</th>
      <td>tech</td>
      <td>1.0</td>
      <td>0.320908</td>
      <td>0.320908</td>
    </tr>
    <tr>
      <th>1444</th>
      <td>ass</td>
      <td>1.0</td>
      <td>0.348307</td>
      <td>0.348307</td>
    </tr>
    <tr>
      <th>580</th>
      <td>im</td>
      <td>6.0</td>
      <td>0.060625</td>
      <td>0.363748</td>
    </tr>
    <tr>
      <th>1139</th>
      <td>eat</td>
      <td>1.0</td>
      <td>0.376478</td>
      <td>0.376478</td>
    </tr>
    <tr>
      <th>422</th>
      <td>put</td>
      <td>4.0</td>
      <td>0.103184</td>
      <td>0.412737</td>
    </tr>
    <tr>
      <th>428</th>
      <td>ad</td>
      <td>23.0</td>
      <td>0.019803</td>
      <td>0.455460</td>
    </tr>
    <tr>
      <th>569</th>
      <td>ever</td>
      <td>5.0</td>
      <td>0.103184</td>
      <td>0.515921</td>
    </tr>
    <tr>
      <th>964</th>
      <td>intersect</td>
      <td>2.0</td>
      <td>0.268264</td>
      <td>0.536528</td>
    </tr>
  </tbody>
</table>
</div>
<p>It is worth noting that the <em>sklearn</em> library has the ability to directly calculate a TD-IDF matrix.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="n">tfidf</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">max_features</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">lowercase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">analyzer</span><span class="o">=</span><span class="s1">&#39;word&#39;</span><span class="p">,</span>
 <span class="n">stop_words</span><span class="o">=</span> <span class="s1">&#39;english&#39;</span><span class="p">,</span><span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">data_vect</span> <span class="o">=</span> <span class="n">tfidf</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">])</span>

<span class="n">data_vect</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;51x1000 sparse matrix of type &#39;&lt;class &#39;numpy.float64&#39;&gt;&#39;
	with 5502 stored elements in Compressed Sparse Row format&gt;
</pre></div>
</div>
</section>
<section id="similarity">
<h2>Similarity<a class="headerlink" href="#similarity" title="Permalink to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics.pairwise</span> <span class="kn">import</span> <span class="n">cosine_similarity</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">FutureWarning</span><span class="p">)</span> <span class="c1"># This suppresses a warning from scikit learn that they are going to update their code</span>
</pre></div>
</div>
<p>One thing we can look at is how similar two texts are. This has a practical use when looking for plagiarism, but can also be used to compare author’s styles. To do this there are a few ways we can measure similarity.</p>
<p>First we need to set up our two sets of texts. Here we have the ability to choose the size of our sets and whether we want the first n texts from our full data set or just a random sample. Keep in mind that if you want to use two dissimilar sets, you won’t have a control value (something x itself).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">set1</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="s2">&quot;Index&quot;</span><span class="p">,</span><span class="s2">&quot;Type&quot;</span><span class="p">,</span><span class="s1">&#39;Text&#39;</span><span class="p">]]</span>
<span class="n">set2</span> <span class="o">=</span> <span class="n">set1</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#To let us do a &quot;cross join&quot;: Every row in one gets matched to all rows in the other</span>
<span class="n">set1</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span> 
<span class="n">set2</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>

<span class="n">similarity</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">set1</span><span class="p">,</span> <span class="n">set2</span><span class="p">,</span> <span class="n">on</span> <span class="o">=</span><span class="s1">&#39;key&#39;</span><span class="p">,</span> <span class="n">suffixes</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;_1&#39;</span><span class="p">,</span> <span class="s1">&#39;_2&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s2">&quot;key&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp/ipykernel_1623401/4055549479.py:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  set1[&#39;key&#39;]=1
/tmp/ipykernel_1623401/4055549479.py:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  set2[&#39;key&#39;]=1
</pre></div>
</div>
<section id="jaccard-similarity">
<h3>Jaccard Similarity<a class="headerlink" href="#jaccard-similarity" title="Permalink to this heading">#</a></h3>
<p>The first is using a metric called the <a class="reference external" href="https://en.wikipedia.org/wiki/Jaccard_index">Jaccard Index</a>. This is just taking the intersection of two sets of things (in our case, words or n-grams) and dividing it by the union of those sets. This gives us a metric for understanding how the word usage compares but doesn’t account for repeated words since the union and intersections just take unique words. One advantage though is that we can easily extend the single word similarity to compare bi-grams and other n-grams if we want to examine phrase usage.</p>
<div class="math notranslate nohighlight">
\[S_{J}(A,B)=\frac{A \cap B}{A \cup B}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">WordNetLemmatizer</span>
<span class="kn">from</span> <span class="nn">textblob</span> <span class="kn">import</span> <span class="n">TextBlob</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">jaccard</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    
    <span class="n">old</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Text_1&#39;</span><span class="p">]</span>
    <span class="n">new</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Text_2&#39;</span><span class="p">]</span>
    
    <span class="n">old_n_grams</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">old</span><span class="p">)</span><span class="o">.</span><span class="n">ngrams</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
    <span class="n">new_n_grams</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">el</span><span class="p">)</span> <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">TextBlob</span><span class="p">(</span><span class="n">new</span><span class="p">)</span><span class="o">.</span><span class="n">ngrams</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        
    <span class="n">union</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">old_n_grams</span><span class="p">)</span> <span class="o">|</span> <span class="nb">set</span><span class="p">(</span><span class="n">new_n_grams</span><span class="p">))</span>
    <span class="n">intersection</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">old_n_grams</span><span class="p">)</span> <span class="o">&amp;</span> <span class="nb">set</span><span class="p">(</span><span class="n">new_n_grams</span><span class="p">))</span>
    
    <span class="n">lu</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">union</span><span class="p">)</span>
    <span class="n">li</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">intersection</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="p">(</span><span class="n">li</span><span class="o">/</span><span class="n">lu</span><span class="p">,</span><span class="n">li</span><span class="p">,</span><span class="n">lu</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]:</span> <span class="c1"># Add values to the list for the n-gram you&#39;re interested in</span>
    <span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Jaccard_Index_for_</span><span class="si">{}</span><span class="s1">_grams&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)]</span><span class="o">=</span><span class="n">similarity</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">jaccard</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Intersection&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">similarity</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">jaccard</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Union&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">similarity</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">jaccard</span><span class="p">(</span><span class="n">x</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index_1</th>
      <th>Type_1</th>
      <th>Text_1</th>
      <th>Index_2</th>
      <th>Type_2</th>
      <th>Text_2</th>
      <th>Jaccard_Index_for_1_grams</th>
      <th>Jaccard_Index_for_2_grams</th>
      <th>Intersection</th>
      <th>Union</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>144</td>
      <td>144</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>2</td>
      <td>A</td>
      <td>presence data artificial intelligence computin...</td>
      <td>0.102362</td>
      <td>0.000000</td>
      <td>26</td>
      <td>254</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>3</td>
      <td>A</td>
      <td>current world use data interesting manipulated...</td>
      <td>0.094891</td>
      <td>0.005195</td>
      <td>26</td>
      <td>274</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>4</td>
      <td>A</td>
      <td>everyday life really take notice intersection ...</td>
      <td>0.071429</td>
      <td>0.000000</td>
      <td>17</td>
      <td>238</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>5</td>
      <td>A</td>
      <td>advancement human race linked remarkable progr...</td>
      <td>0.099042</td>
      <td>0.002257</td>
      <td>31</td>
      <td>313</td>
    </tr>
  </tbody>
</table>
</div>
</section>
<section id="cosine-similarity">
<h3>Cosine Similarity<a class="headerlink" href="#cosine-similarity" title="Permalink to this heading">#</a></h3>
<p>The second metric we can use is <a class="reference external" href="https://en.wikipedia.org/wiki/Cosine_similarity">Cosine Similarity</a>, however there is a catch here. Cosine similarity requires a vector for each word so we make a choice here to use term frequency. You could choose something else, inverse document frequency or tf-idf would both be good choices. Cosine similarity with a term frequency vector gives us something very similar to the Jaccard Index but accounts for word repetition. This makes it better for tracking word importance between two texts.</p>
<div class="math notranslate nohighlight">
\[S_{C}(v_1,v_2)=cos(\theta)=\frac{v_1\cdot v_2}{||v_1||\times||v_2||}\]</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_cosine_sim</span><span class="p">(</span><span class="n">str1</span><span class="p">,</span><span class="n">str2</span><span class="p">):</span> 
    <span class="n">vectors</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">get_vectors</span><span class="p">([</span><span class="n">str1</span><span class="p">,</span><span class="n">str2</span><span class="p">])]</span>
    <span class="k">return</span> <span class="n">cosine_similarity</span><span class="p">(</span><span class="n">vectors</span><span class="p">)</span>
    
<span class="k">def</span> <span class="nf">get_vectors</span><span class="p">(</span><span class="n">slist</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">slist</span><span class="p">]</span>
    <span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>
    <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">cosine</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    
    <span class="n">old</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Text_1&#39;</span><span class="p">]</span>
    <span class="n">new</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;Text_2&#39;</span><span class="p">]</span>
    
    <span class="k">return</span> <span class="n">get_cosine_sim</span><span class="p">(</span><span class="n">old</span><span class="p">,</span><span class="n">new</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>   
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Cosine_Similarity&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">similarity</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">cosine</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index_1</th>
      <th>Type_1</th>
      <th>Text_1</th>
      <th>Index_2</th>
      <th>Type_2</th>
      <th>Text_2</th>
      <th>Jaccard_Index_for_1_grams</th>
      <th>Jaccard_Index_for_2_grams</th>
      <th>Intersection</th>
      <th>Union</th>
      <th>Cosine_Similarity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>1.000000</td>
      <td>1.000000</td>
      <td>144</td>
      <td>144</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>2</td>
      <td>A</td>
      <td>presence data artificial intelligence computin...</td>
      <td>0.102362</td>
      <td>0.000000</td>
      <td>26</td>
      <td>254</td>
      <td>0.268382</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>3</td>
      <td>A</td>
      <td>current world use data interesting manipulated...</td>
      <td>0.094891</td>
      <td>0.005195</td>
      <td>26</td>
      <td>274</td>
      <td>0.300258</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>4</td>
      <td>A</td>
      <td>everyday life really take notice intersection ...</td>
      <td>0.071429</td>
      <td>0.000000</td>
      <td>17</td>
      <td>238</td>
      <td>0.178220</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>A</td>
      <td>saying data new gold could accurate current so...</td>
      <td>5</td>
      <td>A</td>
      <td>advancement human race linked remarkable progr...</td>
      <td>0.099042</td>
      <td>0.002257</td>
      <td>31</td>
      <td>313</td>
      <td>0.324575</td>
    </tr>
  </tbody>
</table>
</div>
</section>
<section id="visualize-similarity">
<h3>Visualize Similarity<a class="headerlink" href="#visualize-similarity" title="Permalink to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">metric</span> <span class="o">=</span> <span class="s1">&#39;Cosine_Similarity&#39;</span>
<span class="c1">#metric = &#39;Jaccard_Index_for_1_grams&#39;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> 
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">index</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Index_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">columns</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Index_2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="n">similarity</span><span class="p">[(</span><span class="n">similarity</span><span class="p">[</span><span class="s1">&#39;Index_1&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">col</span><span class="p">]</span><span class="o">=</span><span class="n">sub</span><span class="p">[</span><span class="n">sub</span><span class="p">[</span><span class="s1">&#39;Index_2&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">col</span><span class="p">][</span><span class="n">metric</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>        
<span class="n">plt</span><span class="o">.</span><span class="n">pcolor</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="png" src="code/output_74_0.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Index&#39;</span><span class="p">]</span><span class="o">==</span><span class="mi">46</span><span class="p">]</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Index</th>
      <th>Type</th>
      <th>Text</th>
      <th>wordcount</th>
      <th>char_count</th>
      <th>avg_word</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>45</th>
      <td>46</td>
      <td>B</td>
      <td>using technology daily basis bring numerous be...</td>
      <td>126</td>
      <td>869</td>
      <td>5.873016</td>
    </tr>
  </tbody>
</table>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="p">[[</span><span class="s1">&#39;Type_1&#39;</span><span class="p">,</span><span class="s1">&#39;Index_1&#39;</span><span class="p">,</span><span class="s1">&#39;Type_2&#39;</span><span class="p">,</span><span class="s1">&#39;Index_2&#39;</span><span class="p">,</span><span class="n">metric</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">metric</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type_1</th>
      <th>Index_1</th>
      <th>Type_2</th>
      <th>Index_2</th>
      <th>Cosine_Similarity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>1</td>
      <td>A</td>
      <td>1</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2444</th>
      <td>B</td>
      <td>48</td>
      <td>B</td>
      <td>48</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>624</th>
      <td>A</td>
      <td>13</td>
      <td>A</td>
      <td>13</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2548</th>
      <td>B</td>
      <td>50</td>
      <td>B</td>
      <td>50</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1612</th>
      <td>B</td>
      <td>32</td>
      <td>B</td>
      <td>32</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2315</th>
      <td>B</td>
      <td>46</td>
      <td>A</td>
      <td>21</td>
      <td>0.109789</td>
    </tr>
    <tr>
      <th>1023</th>
      <td>A</td>
      <td>21</td>
      <td>A</td>
      <td>4</td>
      <td>0.103074</td>
    </tr>
    <tr>
      <th>173</th>
      <td>A</td>
      <td>4</td>
      <td>A</td>
      <td>21</td>
      <td>0.103074</td>
    </tr>
    <tr>
      <th>2298</th>
      <td>B</td>
      <td>46</td>
      <td>A</td>
      <td>4</td>
      <td>0.071892</td>
    </tr>
    <tr>
      <th>198</th>
      <td>A</td>
      <td>4</td>
      <td>B</td>
      <td>46</td>
      <td>0.071892</td>
    </tr>
  </tbody>
</table>
<p>2601 rows × 5 columns</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">similarity</span><span class="p">[</span><span class="n">similarity</span><span class="p">[</span><span class="n">metric</span><span class="p">]</span><span class="o">&gt;</span><span class="mf">0.05</span><span class="p">][[</span><span class="s1">&#39;Type_1&#39;</span><span class="p">,</span><span class="s1">&#39;Index_1&#39;</span><span class="p">,</span><span class="s1">&#39;Type_2&#39;</span><span class="p">,</span><span class="s1">&#39;Index_2&#39;</span><span class="p">,</span><span class="n">metric</span><span class="p">]]</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="n">metric</span><span class="p">,</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</pre></div>
</div>
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Type_1</th>
      <th>Index_1</th>
      <th>Type_2</th>
      <th>Index_2</th>
      <th>Cosine_Similarity</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>A</td>
      <td>1</td>
      <td>A</td>
      <td>1</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2444</th>
      <td>B</td>
      <td>48</td>
      <td>B</td>
      <td>48</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>624</th>
      <td>A</td>
      <td>13</td>
      <td>A</td>
      <td>13</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>2548</th>
      <td>B</td>
      <td>50</td>
      <td>B</td>
      <td>50</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1612</th>
      <td>B</td>
      <td>32</td>
      <td>B</td>
      <td>32</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2315</th>
      <td>B</td>
      <td>46</td>
      <td>A</td>
      <td>21</td>
      <td>0.109789</td>
    </tr>
    <tr>
      <th>1023</th>
      <td>A</td>
      <td>21</td>
      <td>A</td>
      <td>4</td>
      <td>0.103074</td>
    </tr>
    <tr>
      <th>173</th>
      <td>A</td>
      <td>4</td>
      <td>A</td>
      <td>21</td>
      <td>0.103074</td>
    </tr>
    <tr>
      <th>2298</th>
      <td>B</td>
      <td>46</td>
      <td>A</td>
      <td>4</td>
      <td>0.071892</td>
    </tr>
    <tr>
      <th>198</th>
      <td>A</td>
      <td>4</td>
      <td>B</td>
      <td>46</td>
      <td>0.071892</td>
    </tr>
  </tbody>
</table>
<p>2601 rows × 5 columns</p>
</div>
</section>
</section>
<section id="using-tf-idf-and-machine-learning">
<h2>Using TF-IDF and Machine Learning<a class="headerlink" href="#using-tf-idf-and-machine-learning" title="Permalink to this heading">#</a></h2>
<p>This is significantly more advanced than the rest of the tutorial. This takes the TF-IDF matrix and applies a <a class="reference external" href="https://en.wikipedia.org/wiki/K-means_clustering">k-means clustering algorithm</a>. This groups the texts into clusters of similar terms from the TF-IDF matrix. This algorithm randomly seeds X “means”, the values are then clustered into the nearest mean. The centroid of the values in each cluster then becomes the new mean and the process repeats until a convergence is reached.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>
<span class="kn">from</span> <span class="nn">sklearn.manifold</span> <span class="kn">import</span> <span class="n">TSNE</span>

<span class="n">groups</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">num_clusters</span> <span class="o">=</span> <span class="n">groups</span>
<span class="n">num_seeds</span> <span class="o">=</span> <span class="n">groups</span>
<span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">300</span>

<span class="n">cmap</span> <span class="o">=</span> <span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">get_cmap</span><span class="p">(</span><span class="s2">&quot;nipy_spectral&quot;</span><span class="p">,</span> <span class="n">groups</span><span class="p">)</span> <span class="c1"># Builds a discrete color mapping using a built in matplotlib color map</span>

<span class="n">c</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cmap</span><span class="o">.</span><span class="n">N</span><span class="p">):</span> <span class="c1"># Converts our discrete map into Hex Values</span>
    <span class="n">rgba</span> <span class="o">=</span> <span class="n">cmap</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="n">c</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">i</span><span class="p">:</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">colors</span><span class="o">.</span><span class="n">rgb2hex</span><span class="p">(</span><span class="n">rgba</span><span class="p">)})</span>

<span class="n">labels_color_map</span><span class="o">=</span><span class="n">c</span>

<span class="n">pca_num_components</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">tsne_num_components</span> <span class="o">=</span> <span class="mi">2</span>

<span class="c1"># calculate tf-idf of texts</span>
<span class="n">tfidf</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">max_features</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">lowercase</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">analyzer</span><span class="o">=</span><span class="s1">&#39;word&#39;</span><span class="p">,</span><span class="n">stop_words</span><span class="o">=</span> <span class="s1">&#39;english&#39;</span><span class="p">,</span><span class="n">ngram_range</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="n">tf_idf_matrix</span> <span class="o">=</span> <span class="n">tfidf</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">])</span>

<span class="c1"># create k-means model with custom config</span>
<span class="n">clustering_model</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span>
    <span class="n">n_clusters</span><span class="o">=</span><span class="n">num_clusters</span><span class="p">,</span>
    <span class="n">max_iter</span><span class="o">=</span><span class="n">max_iterations</span><span class="p">,</span>
    <span class="c1">#precompute_distances=&quot;auto&quot;,</span>
    <span class="c1">#n_jobs=-1</span>
<span class="p">)</span>

<span class="n">labels</span> <span class="o">=</span> <span class="n">clustering_model</span><span class="o">.</span><span class="n">fit_predict</span><span class="p">(</span><span class="n">tf_idf_matrix</span><span class="p">)</span>
<span class="c1">#print(labels)</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">tf_idf_matrix</span><span class="o">.</span><span class="n">todense</span><span class="p">()</span>

<span class="c1"># ----------------------------------------------------------------------------------------------------------------------</span>

<span class="n">reduced_data</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">pca_num_components</span><span class="p">)</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="c1"># print(reduced_data)</span>

<span class="kn">import</span> <span class="nn">matplotlib.patches</span> <span class="k">as</span> <span class="nn">mpatches</span>
<span class="n">legendlist</span><span class="o">=</span><span class="p">[</span><span class="n">mpatches</span><span class="o">.</span><span class="n">Patch</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">labels_color_map</span><span class="p">[</span><span class="n">key</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">key</span><span class="p">))</span><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">labels_color_map</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">instance</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">reduced_data</span><span class="p">):</span>
    <span class="c1">#print(instance, index, labels[index])</span>
    <span class="n">pca_comp_1</span><span class="p">,</span> <span class="n">pca_comp_2</span> <span class="o">=</span> <span class="n">reduced_data</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">labels_color_map</span><span class="p">[</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]]</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">pca_comp_1</span><span class="p">,</span> <span class="n">pca_comp_2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">handles</span><span class="o">=</span><span class="n">legendlist</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>



<span class="c1"># t-SNE plot</span>
<span class="c1">#embeddings = TSNE(n_components=tsne_num_components)</span>
<span class="c1">#Y = embeddings.fit_transform(X)</span>
<span class="c1">#plt.scatter(Y[:, 0], Y[:, 1], cmap=plt.cm.Spectral)</span>
<span class="c1">#plt.show()</span>

</pre></div>
</div>
<p><img alt="png" src="code/output_80_0.png" /></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">tfidf_test</span> <span class="o">=</span> <span class="n">tf1</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;tfidf&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="mi">1000</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">title_groups</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">([</span><span class="n">labels</span><span class="p">,</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Type&#39;</span><span class="p">],</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Text&#39;</span><span class="p">]])</span>
</pre></div>
</div>
<p>These are the titles of the texts in each cluster. Keep in mind that each time you run the algorithm, the randomness in generating the initial means will result in different clusters.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">title_groups</span><span class="p">)):</span>
    <span class="n">data</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="s1">&#39;Group&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">title_groups</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">grp</span><span class="o">=</span><span class="mi">0</span>
<span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="s1">&#39;Group&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">grp</span><span class="p">][</span><span class="s1">&#39;Text&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0     saying data new gold could accurate current so...
1     presence data artificial intelligence computin...
3     everyday life really take notice intersection ...
5     every day working sharing interacting data art...
6     one clear interaction data see everyday life u...
7     intersection data artificial intelligence comp...
8     living create data point preexisted idea data ...
9     intersection data ai computing affect constant...
10    completed first semester smu transferring last...
12    data everywhere even dont notice phone though ...
13    today day age data one powerful tool existence...
14    use computer algorithm everyday life mainly us...
15    data artificial intelligence computing affect ...
16    use data everywhere soon open internet educati...
17    class data science meant nothing didnt really ...
19    intersection data artificial intelligence comp...
20    avid user social medium data science play cont...
23    data artificial intelligence computing affect ...
45    using technology daily basis bring numerous be...
Name: Text, dtype: object
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">groups</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;#### </span><span class="si">{}</span><span class="s2"> ###&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">el</span> <span class="ow">in</span> <span class="n">title_groups</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">el</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="n">i</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2"> - </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">el</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[:</span><span class="mi">10</span><span class="p">])))</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>#### 0 ###

A - saying data new gold could accurate current society major multinational
A - presence data artificial intelligence computing constantly becoming apparent life moment
A - everyday life really take notice intersection data ai computing something
A - every day working sharing interacting data artificial intelligence computing common
A - one clear interaction data see everyday life use social medium
A - intersection data artificial intelligence computing increasingly large effect daily life
A - living create data point preexisted idea data opinion human innately
A - intersection data ai computing affect constant use social medium example
A - completed first semester smu transferring last fall initial desire largely
A - data everywhere even dont notice phone though prevalent place see
A - today day age data one powerful tool existence every aspect
A - use computer algorithm everyday life mainly use technology daily life
A - data artificial intelligence computing affect everyday life campus alone computer
A - use data everywhere soon open internet education social medium navigation
A - class data science meant nothing didnt really know much clue
A - intersection data artificial intelligence computing become integral part life especially
A - avid user social medium data science play content filtered show
A - data artificial intelligence computing affect modern life daily differently personal
B - using technology daily basis bring numerous benefit convenience life also

#### 1 ###

A - current world use data interesting manipulated part obtaining information twist
A - advancement human race linked remarkable progress intersection data artificial intelligence
A - data collection information artificial intelligence autogenerating programming computing daily task
A - intersection data artificial intelligence computing affect everyday life even may
A - use artificial intelligence computing data extreme effect everyday life costumized
A - intersection data artificial intelligence computing dramatically impacted everyday life moment
B - intersection data artificial intelligence computing profoundly transformed everyday life permeating
B - intersection data artificial intelligence ai computing become integral part everyday
B - intersection data artificial intelligence computing profoundly impacted everyday life shaping
B - intersection data artificial intelligence computing profound impact daily life digital
B - convergence data artificial intelligence ai computing significant impact everyday life
B - intersection data artificial intelligence computing deeply interwoven fabric daily life
B - integration data artificial intelligence computing transformed way interact world daily
B - intersection data artificial intelligence computing become integral part everyday life
B - intersection data artificial intelligence computing profound impact everyday life today
B - today interconnected world intersection data artificial intelligence ai computing become
B - intersection data artificial intelligence computing profound impact everyday life constantly
B - intersection data artificial intelligence ai computing profound impact daily life
B - today technologically advanced world intersection data artificial intelligence ai computing
B - intersection data artificial intelligence computing become fundamental part daily life
B - modern age intersection data artificial intelligence ai computing permeated every
B - intersection data artificial intelligence computing profound impact everyday life today
B - intersection data artificial intelligence computing profound impact everyday life reshaping
B - intersection data artificial intelligence computing profound impact everyday life constantly
B - intersection data artificial intelligence computing profound farreaching impact daily life
B - intersection data artificial intelligence computing profoundly impacted everyday life shaping
B - today interconnected world intersection data artificial intelligence ai computing profound
B - triad data artificial intelligence computing play instrumental role shaping everyday
B - rapidly evolving landscape technology intersection data artificial intelligence computing exerts
B - intersection data artificial intelligence ai computing profound impact daily life
B - intersection data artificial intelligence computing profound impact everyday life shaping
B - intersection data artificial intelligence computing profound effect everyday life shaping
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./code"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Comparing Student Work to Generative AI</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#setup">Setup</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#counting-words-and-characters">Counting Words and Characters</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-text">Processing Text</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#cleaning-up-words">Cleaning Up Words</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lowercase">Lowercase</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-punctuation">Remove Punctuation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-stopwords">Remove Stopwords</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remove-frequent-words">Remove Frequent Words</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lemmatization">Lemmatization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#term-frequency">Term Frequency</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inverse-document-frequency">Inverse Document Frequency</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#term-frequency-inverse-document-frequency-tf-idf">Term Frequency – Inverse Document Frequency (TF-IDF)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#similarity">Similarity</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#jaccard-similarity">Jaccard Similarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cosine-similarity">Cosine Similarity</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualize-similarity">Visualize Similarity</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-tf-idf-and-machine-learning">Using TF-IDF and Machine Learning</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book community
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>